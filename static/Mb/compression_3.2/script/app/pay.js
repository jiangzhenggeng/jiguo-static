define(["jquery","layer"],function(a,b){function c(a,c){return b.open({skin:"msg",time:c||2,content:a})}function d(b,d,f,g){if(b)return;b=!0,a.get(d,function(a){a.status==0?a.url?window.location=a.url:e(f,g):c(a.message),b=!1},"json")}function e(b,d){WeixinJSBridge.invoke("getBrandWCPayRequest",b,function(b){b.err_msg=="get_brand_wcpay_request:ok"?a.get("/api/order/IsSuccess",{orderid:d},function(a){a.status==0&&(c("支付成功"),window.location.href="http://m.jiguo.com/mb/pay/myorder.html?orderid="+d)},"json"):b.err_msg=="get_brand_wcpay_request:cancel"?c("支付取消"):b.err_msg=="get_brand_wcpay_request:fail"?c("支付失败"):c("未知错误")})}function f(b,d){if(b)return;b=!0,a.get(d,function(a){a.status==0?window.location=a.url:c(a.message),b=!1},"json")}return{weixinPay:d,aliPay:f}})