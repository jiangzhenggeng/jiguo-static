/*!
 @Name：layer mobile v2.0 弹层组件移动版
 @Author：贤心
 @Site：http://layer.layui.com/mobie/
 @License：LGPL

 */

!function(a){var b=document,c="querySelectorAll",d="getElementsByClassName",e=function(a){return b[c](a)},f={type:0,shade:!0,shadeClose:!0,fixed:!0,anim:"scale"},g={extend:function(a){var b=JSON.parse(JSON.stringify(f));for(var c in a)b[c]=a[c];return b},timer:{},end:{}};g.touch=function(a,b){a.addEventListener("click",function(a){b.call(this,a)},!1)};var h=0,i=["layui-m-layer"],j=function(a){var b=this;b.config=g.extend(a),b.view()};j.prototype.view=function(){var a=this,c=a.config,f=b.createElement("div");a.id=f.id=i[0]+h,f.setAttribute("class",i[0]+" "+i[0]+(c.type||0)),f.setAttribute("index",h);var g=function(){var a=typeof c.title=="object";return c.title?'<h3 style="'+(a?c.title[1]:"")+'">'+(a?c.title[0]:c.title)+"</h3>":""}(),j=function(){typeof c.btn=="string"&&(c.btn=[c.btn]);var a=(c.btn||[]).length,b;return a===0||!c.btn?"":(b='<span yes type="1">'+c.btn[0]+"</span>",a===2&&(b='<span no type="0">'+c.btn[1]+"</span>"+b),'<div class="layui-m-layerbtn">'+b+"</div>")}();c.fixed||(c.top=c.hasOwnProperty("top")?c.top:100,c.style=c.style||"",c.style+=" top:"+(b.body.scrollTop+c.top)+"px"),c.type===2&&(c.content='<i></i><i class="layui-m-layerload"></i><i></i><p>'+(c.content||"")+"</p>"),c.skin&&(c.anim="up"),c.skin==="msg"&&(c.shade=!1),f.innerHTML=(c.shade?"<div "+(typeof c.shade=="string"?'style="'+c.shade+'"':"")+' class="layui-m-layershade"></div>':"")+'<div class="layui-m-layermain" '+(c.fixed?"":'style="position:static;"')+">"+'<div class="layui-m-layersection">'+'<div class="layui-m-layerchild '+(c.skin?"layui-m-layer-"+c.skin+" ":"")+(c.className?c.className:"")+" "+(c.anim?"layui-m-anim-"+c.anim:"")+'" '+(c.style?'style="'+c.style+'"':"")+">"+g+'<div class="layui-m-layercont">'+c.content+"</div>"+j+"</div>"+"</div>"+"</div>";if(!c.type||c.type===2){var k=b[d](i[0]+c.type),l=k.length;l>=1&&layer.close(k[0].getAttribute("index"))}document.body.appendChild(f);var m=a.elem=e("#"+a.id)[0];c.success&&c.success(m),a.index=h++,a.action(c,m)},j.prototype.action=function(a,b){var c=this;a.time&&(g.timer[c.index]=setTimeout(function(){layer.close(c.index)},a.time*1e3));var e=function(){var b=this.getAttribute("type");b==0?(a.no&&a.no(),layer.close(c.index)):a.yes?a.yes(c.index):layer.close(c.index)};if(a.btn){var f=b[d]("layui-m-layerbtn")[0].children,h=f.length;for(var i=0;i<h;i++)g.touch(f[i],e)}if(a.shade&&a.shadeClose){var j=b[d]("layui-m-layershade")[0];g.touch(j,function(){layer.close(c.index,a.end)})}a.end&&(g.end[c.index]=a.end)},a.layer={v:"2.0",index:h,open:function(a){var b=new j(a||{});return b.index},close:function(a){var c=e("#"+i[0]+a)[0];if(!c)return;c.innerHTML="",b.body.removeChild(c),clearTimeout(g.timer[a]),delete g.timer[a],typeof g.end[a]=="function"&&g.end[a](),delete g.end[a]},closeAll:function(){var a=b[d](i[0]);for(var c=0,e=a.length;c<e;c++)layer.close(a[0].getAttribute("index")|0)}},"function"==typeof define?define([],function(){var a=document.scripts,c,d;for(var e=0;e<a.length;e++)if(a[e].src&&a[e].src.indexOf("script/require.js")>0){c=a[e],d=c.src;break}var f=d.substring(0,d.lastIndexOf("/")+1);if(c.getAttribute("merge"))return;return document.head.appendChild(function(){var a=b.createElement("link");return a.href=f+"lib/layer/need/layer.css?2.0",a.type="text/css",a.rel="styleSheet",a.id="layermcss",a}()),layer}):function(){var a=document.scripts,c,d,e;for(var f=0;f<a.length;f++){if(a[f].src&&a[f].src.indexOf("script/require.js")>0){c=a[f],d=c.src,e=d.substring(0,d.lastIndexOf("/")+1),e+="lib/layer/need/layer.css?2.0";break}if(a[f].src&&a[f].src.indexOf("script/lib/layer/layer.js")>0){c=a[f],d=c.src,e=d.substring(0,d.lastIndexOf("/")+1),e+="need/layer.css?2.0";break}}if(c.getAttribute("merge"))return;document.head.appendChild(function(){var a=b.createElement("link");return a.href=e,a.type="text/css",a.rel="styleSheet",a.id="layermcss",a}())}()}(window)