define(["jquery","app/unitTool"],function(a,b){function c(c,e,f){c=c||{},a.get("/api/order/Pay",c,function(a){window.isPaying=!1,a.status==0?a.url?window.location=a.url:d(f,e):b.msg(a.message)},"json")}function d(c,d){WeixinJSBridge.invoke("getBrandWCPayRequest",c,function(c){c.err_msg=="get_brand_wcpay_request:ok"?a.get("/api/order/IsSuccess",{orderid:d},function(a){a.status==0&&(b.msg("支付成功"),window.location.href="http://m.jiguo.com/mb/pay/myorder.html?orderid="+d)},"json"):c.err_msg=="get_brand_wcpay_request:cancel"?b.msg("支付取消"):c.err_msg=="get_brand_wcpay_request:fail"?b.msg("支付失败"):b.msg("未知错误")})}function e(c){c=c||{},a.get("/api/order/Pay",c,function(a){window.isPaying=!1,a.status==0?(b.msg("正在支付...",9999),window.location=a.url):b.msg(a.message)},"json")}return{weixinPay:c,aliPay:e}})