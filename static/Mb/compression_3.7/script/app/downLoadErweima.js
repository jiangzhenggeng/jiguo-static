define(["require","jquery","layer","app/tplEngine"],function(a,b,c,d){function h(a){var b=new Blob([""],{type:"application/octet-stream"}),c=URL.createObjectURL(b),d=document.createElement("a");d.href=a,d.download=a.replace(/(.*\/)*([^.]+.*)/ig,"$2").split("?")[0];var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),d.dispatchEvent(e),URL.revokeObjectURL(c)}function i(){var a=navigator.userAgent.toLowerCase();return/iphone|ipad|ipod/.test(a)?!0:!1}function j(){var a=window.navigator.userAgent.toLowerCase();return a.match(/MicroMessenger/i)=="micromessenger"?!0:!1}function k(a){a.close=a.close||function(){};var e={content:d.init(g,{title:a.title,content:a.content}),skin:"attention",shadeClose:!1,success:function(d){b(d).find("[data-attention]").click(function(){c.close(k),a.close()})}};!j()&&!i()&&(e.btn="保存二维码至手机",e.yes=function(){h(f)});var k=c.open(e)}var e=a.toUrl("../../style/ext_img/close_64.svg"),f=a.toUrl("../../style/ext_img/qrcode_for_gh_f6020f09743b_430.jpg"),g='<div class="attention-wrap">\n        <div class="close" data-attention><img src="'+e+'"/></div>\n'+'        <div class="ft16 mb10"><%= title %></div>\n'+"        <div>\n"+'            <div class="ft12"><%= content %></div>\n'+'            <div class="attention-erweima">\n'+'                <img src="'+f+'"/>\n'+"            </div>\n"+"        </div>\n"+"    </div>";return{saveAs:h,loadErweima:k,isWeixin:j,isIos:i}})