define(["jquery","app/unitTool"],function(a,b){function c(c,e,f){c=c||{},a.get("/api/order/Pay",c,function(c){window.isPaying=!1;if(c.status==0)if(c.url)window.location=c.url;else if(c.status==-7)var g=layer.open({content:"还没有收件人信息，现在去填写？",btn:['<span style="color: #fe5341;font-weight: bold">去填写</span>',"暂不填写"],yes:function(){layer.closeAll(g),a("#order-add-address-btn-wrap").trigger("click")}});else d(f,e);else b.msg(c.message)},"json")}function d(c,d){WeixinJSBridge.invoke("getBrandWCPayRequest",c,function(c){c.err_msg=="get_brand_wcpay_request:ok"?a.get("/api/order/IsSuccess",{orderid:d},function(a){a.status==0&&(b.msg("支付成功"),window.location.href="http://m.jiguo.com/mb/pay/myorder.html?orderid="+d)},"json"):c.err_msg=="get_brand_wcpay_request:cancel"?b.msg("支付取消"):c.err_msg=="get_brand_wcpay_request:fail"?b.msg("支付失败"):b.msg("未知错误")})}function e(c){c=c||{},a.get("/api/order/Pay",c,function(c){window.isPaying=!1;if(c.status==0)b.msg("正在支付...",9999),window.location=c.url;else if(c.status==-7)var d=layer.open({content:"还没有收件人信息，现在去填写？",btn:['<span style="color: #fe5341;font-weight: bold">去填写</span>',"暂不填写"],yes:function(){layer.closeAll(d),a("#order-add-address-btn-wrap").trigger("click")}});else b.msg(c.message)},"json")}return{weixinPay:c,aliPay:e}})