define(["require","jquery","layer","app/tplEngine"],function(a,b,c,d){function e(a){var b=new Blob([""],{type:"application/octet-stream"}),c=URL.createObjectURL(b),d=document.createElement("a");d.href=a,d.download=a.replace(/(.*\/)*([^.]+.*)/ig,"$2").split("?")[0];var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),d.dispatchEvent(e),URL.revokeObjectURL(c)}function f(){var a=navigator.userAgent.toLowerCase();return/iphone|ipad|ipod/.test(a)?!0:!1}function g(){var a=window.navigator.userAgent.toLowerCase();return a.match(/MicroMessenger/i)=="micromessenger"?!0:!1}function h(a){a.close=a.close||function(){},j=a.image||j;var h='<div class="attention-wrap">\n        <div class="close" data-attention><img src="'+i+'"/></div>\n'+'        <div class="ft16 mb10"><%= title %></div>\n'+"        <div>\n"+'            <div class="ft12"><%= content %></div>\n'+'            <div class="attention-erweima">\n'+'                <img style="display: block;margin: auto;width: 85%;" src="'+j+'"/>\n'+"            </div>\n"+"        </div>\n"+"    </div>",k={content:d.init(h,{title:a.title,content:a.content}),skin:"attention",shadeClose:!1,success:function(d){b(d).find("[data-attention]").click(function(){c.close(l),a.close()})}};!g()&&!f()&&(k.btn="保存二维码至手机",k.yes=function(){e(j)});var l=c.open(k)}var i=a.toUrl("../../style/ext_img/close_64.svg"),j=a.toUrl("../../style/ext_img/qrcode_for_gh_f6020f09743b_430.jpg");return{saveAs:e,loadErweima:h,isWeixin:g,isIos:f}})