define(["require","jquery"],function(a,b){function c(a){function h(a,b){var c=a.toString().split("?")[1].toString().split("&"),d=null;for(var e=0;e<c.length;e++)if(c[e].split("=")[0].toLowerCase()==b)return d=c[e].split("=")[1],d;return""}var a=b.extend({},a),c=b(a.selecter||"body"),d=a.width||c.width(),e=d*2/3,f=c.find("embed,iframe:not([data-productid])").filter(function(a,c){var d=String(b(this).attr("src"));return!b(this).attr("src")||d.indexOf("jiguo.com")!=-1||d.indexOf("xhcheng.com")!=-1?!1:!0}),g=null;f.each(function(){g=b(this).attr("src");var a="iframe"+Math.random().toString().replace(".","");b(this).replaceWith('<div style="text-align: center;"><iframe id="'+a+'" frameborder="0"></iframe></div>');var c=b("#"+a);g.match("v.qq.com")||g.match("video.qq.com")||g.match("imgcache.qq.com")?g="http://v.qq.com/iframe/player.html?vid="+h(g,"vid")+"&width="+d+"&height="+e+"&auto=0":g.match("youku.com")?(g.match(/http:\/\/player.youku.com\/player.php\/sid\/(.+)\/v.swf/),g="http://player.youku.com/embed/"+RegExp.$1):g.match(/sohu\.com(.*?)v\.swf/i)&&(g.match(/sohu\.com(.*?)v\.swf(.*?)id=(\d+)/i),g="http://tv.sohu.com/upload/static/share/share_play.html#4059416_"+RegExp.$3+"_0_2_1");if(g.match(/sohu\.com(.*?)v\.swf/i)){var f='<embed class="previewVideo" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" src="'+g+'" '+'width="'+d+'" '+'height="'+e+'" wmode="transparent" play="true" loop="false" menu="false" allowscriptaccess="never" allowfullscreen="true">';c.replaceWith(f)}else c.attr({src:g,height:e,width:d})})}return{init:c}})